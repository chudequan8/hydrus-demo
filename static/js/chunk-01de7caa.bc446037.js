(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01de7caa","chunk-2d2261e5"],{"0215":function(e,t,r){},"1c4c":function(e,t,r){"use strict";var a=r("9b43"),n=r("5ca1"),o=r("4bf8"),i=r("1fa8"),l=r("33a4"),s=r("9def"),c=r("f1ae"),u=r("27ee");n(n.S+n.F*!r("5cc5")((function(e){Array.from(e)})),"Array",{from:function(e){var t,r,n,d,p=o(e),f="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,g=void 0!==m,b=0,y=u(p);if(g&&(m=a(m,h>2?arguments[2]:void 0,2)),void 0==y||f==Array&&l(y))for(t=s(p.length),r=new f(t);t>b;b++)c(r,b,g?m(p[b],b):p[b]);else for(d=y.call(p),r=new f;!(n=d.next()).done;b++)c(r,b,g?i(d,m,[n.value,b],!0):n.value);return r.length=b,r}})},"399e":function(e,t,r){"use strict";var a=r("8ae7"),n=r.n(a);n.a},"713b":function(e,t,r){},7514:function(e,t,r){"use strict";var a=r("5ca1"),n=r("0a49")(5),o="find",i=!0;o in[]&&Array(1)[o]((function(){i=!1})),a(a.P+a.F*i,"Array",{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(o)},"8ae7":function(e,t,r){},b022:function(e,t,r){"use strict";var a=r("713b"),n=r.n(a);n.a},b718:function(e,t,r){"use strict";var a=r("0215"),n=r.n(a);n.a},cea5:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flow_in-container",attrs:{id:"app"}},[r("div",{staticClass:"search-bar"},[r("el-form",{attrs:{inline:""}},[r("el-form-item",[r("el-date-picker",{ref:"myPicker",staticStyle:{width:"370px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,type:"datetimerange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:e.formParams.timeRange,callback:function(t){e.$set(e.formParams,"timeRange",t)},expression:"formParams.timeRange"}})],1),r("el-form-item",[r("el-select",{staticStyle:{width:"450px"},attrs:{multiple:"",placeholder:"选择渠道",clearable:"",filterable:"","reserve-keyword":"","default-first-option":!0},model:{value:e.formParams.channelArr,callback:function(t){e.$set(e.formParams,"channelArr",t)},expression:"formParams.channelArr"}},e._l(e.channelList,(function(e){return r("el-option",{key:e.channelCode,attrs:{label:e.channelName,value:e.channelCode}})})),1)],1),r("el-form-item",[r("el-select",{attrs:{placeholder:"选择渠道所属",clearable:"",filterable:"","default-first-option":!0},model:{value:e.formParams.channelOperator,callback:function(t){e.$set(e.formParams,"channelOperator",t)},expression:"formParams.channelOperator"}},e._l(e.channelOperatorList,(function(e){return r("el-option",{key:e.userId,attrs:{label:e.username,value:e.username}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.handleSearch(1)}}},[e._v("查询")]),r("el-button",{attrs:{icon:"el-icon-delete"},on:{click:function(t){return e.handleSearch(2)}}},[e._v("清空")])],1)],1),r("div",{staticClass:"aside-option"},[r("el-dropdown",{attrs:{trigger:"click","hide-on-click":!1}},[r("el-link",{attrs:{type:"primary"}},[e._v("\n          筛选列"),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.colModels,(function(t,a){return r("el-dropdown-item",{key:a},[r("el-checkbox",{attrs:{disabled:t.disabled},on:{change:function(r){return e.handleCheckedChange(t,a)}},model:{value:t.checked,callback:function(r){e.$set(t,"checked",r)},expression:"item.checked"}},[e._v(e._s(t.label||t.slotName))])],1)})),1)],1)],1)],1),r("grid-unit",{ref:"flowInGrid",attrs:{formOptions:e.queryFormValues,reqMethod:e.reqFunc,columns:e.curColModels,showSummary:"",footerScopedSlots:e.footerScopedSlots,"summary-method":e.getSummaries,dataHandler:e.dataHandler,headerCellStyle:e.headerCellStyle,cellStyle:e.cellStyle,autoLoad:!1,pageSizeKey:"limit",pageNoKey:"offset"},on:{"sort-change":e.sortChange},scopedSlots:e._u([{key:"channelName",fn:function(t){return[r("p",{staticClass:"table-slot-text"},[e._v(e._s(t.row.channelCode))]),t.row.channelOperator?r("p",{staticClass:"table-slot-text"},[e._v("\n        ("+e._s(t.row.channelOperator)+")\n      ")]):e._e()]}},{key:"partPrice",fn:function(t){return[r("p",{staticClass:"table-slot-text"},[e._v("\n        U\n        "),r("span",{staticStyle:{float:"right"}},[e._v(e._s(t.row.uvPrice))])]),r("p",{staticClass:"table-slot-text"},[e._v("\n        A\n        "),r("span",{staticStyle:{float:"right"}},[e._v(e._s(t.row.registerPrice))])])]}},{key:"roi",fn:function(t){return[r("p",{staticClass:"table-slot-text"},[e._v("\n        U/U\n        "),r("span",{staticStyle:{float:"right"}},[e._v(e._s(e.formatRate(t.row.uvProfit,t.row.uvPrice)))])]),r("p",{staticClass:"table-slot-text"},[e._v("\n        U/A\n        "),r("span",{staticStyle:{float:"right"}},[e._v(e._s(e.formatRate(t.row.reProfit,t.row.registerPrice)))])])]}},{key:"handle",fn:function(t){return[r("el-button",{attrs:{title:"渠道详情",size:"small",icon:"el-icon-s-promotion"},on:{click:function(r){return e.handleChannerDialogVisible(t.row)}}}),r("el-button",{attrs:{title:"甲方详情",size:"small",type:"success",icon:"el-icon-s-custom"},on:{click:function(r){return e.handleAPartDialogVisible(t.row)}}})]}}])}),r("el-dialog",{attrs:{visible:e.channerDialogVisible,width:"1000px",title:"渠道详情"},on:{"update:visible":function(t){e.channerDialogVisible=t}}},[r("grid-unit",{ref:"channelDetailGrid",attrs:{formOptions:e.channelDetailFormValues,reqMethod:e.channelDetailReqFunc,columns:e.expandColModels,autoLoad:!1,pageSizeKey:"limit",pageNoKey:"offset",size:"small",pageSizes:[100,200,500]}})],1),r("el-dialog",{attrs:{visible:e.APartDialogVisible,width:"1000px",title:"甲方详情"},on:{"update:visible":function(t){e.APartDialogVisible=t}}},[r("grid-unit",{ref:"aPartDetailGrid",attrs:{formOptions:e.aPartDetailFormValues,reqMethod:e.aPartDetailReqFunc,columns:e.aPartDetailColModels,autoLoad:!1,pageSizeKey:"limit",pageNoKey:"offset",size:"small"}})],1),r("el-dialog",{attrs:{visible:e.todayDetailDialogVisible,width:"1000px",title:"今日明细"},on:{"update:visible":function(t){e.todayDetailDialogVisible=t}}},[r("grid-unit",{ref:"todayDetailGrid",attrs:{formOptions:e.todayDetailFormValues,reqMethod:e.todayDetailReqFunc,columns:e.todayDetailColModels,autoLoad:!1,pageSizeKey:"limit",pageNoKey:"offset",size:"small"},scopedSlots:e._u([{key:"handle",fn:function(t){return["全部"===t.row.summaryDate?r("span",[e._v("-")]):r("el-button",{attrs:{title:"编辑",type:"warning",size:"mini",icon:"el-icon-edit-outline"},on:{click:function(r){return e.editTodayDetail(t.row)}}})]}}])})],1),r("el-dialog",{attrs:{visible:e.sourceDetailDialogVisible,width:"800px",title:"来源明细"},on:{"update:visible":function(t){e.sourceDetailDialogVisible=t}}},[r("grid-unit",{ref:"sourceDetailGrid",attrs:{formOptions:e.sourceDetailFormValues,reqMethod:e.sourceDetailReqFunc,columns:e.sourceDetailColModels,autoLoad:!1,pageSizeKey:"limit",pageNoKey:"offset",size:"small"}})],1),r("el-dialog",{attrs:{visible:e.editDetailDialogVisible,width:"500px",title:"修改今日明细"},on:{"update:visible":function(t){e.editDetailDialogVisible=t},closed:e.handleEditDetailDialogClosed}},[r("el-form",{ref:"todayDetailForm",attrs:{model:e.todayDetailForm,rules:e.todayDetailFormRules,"label-width":"110px"}},[r("el-form-item",{attrs:{label:"实际注册数：",prop:"registerCount"}},[r("el-input",{attrs:{clearable:"",disabled:""},model:{value:e.todayDetailForm.registerCount,callback:function(t){e.$set(e.todayDetailForm,"registerCount",e._n(t))},expression:"todayDetailForm.registerCount"}})],1),r("el-form-item",{attrs:{label:"实际登录数：",prop:"loginCount"}},[r("el-input",{attrs:{clearable:"",disabled:""},model:{value:e.todayDetailForm.loginCount,callback:function(t){e.$set(e.todayDetailForm,"loginCount",e._n(t))},expression:"todayDetailForm.loginCount"}})],1),r("el-form-item",{attrs:{label:"注册数：",prop:"registerDeduction"}},[r("el-input",{attrs:{clearable:""},model:{value:e.todayDetailForm.registerDeduction,callback:function(t){e.$set(e.todayDetailForm,"registerDeduction",e._n(t))},expression:"todayDetailForm.registerDeduction"}})],1),r("el-form-item",{attrs:{label:"登录数：",prop:"loginDeduction"}},[r("el-input",{attrs:{clearable:""},model:{value:e.todayDetailForm.loginDeduction,callback:function(t){e.$set(e.todayDetailForm,"loginDeduction",e._n(t))},expression:"todayDetailForm.loginDeduction"}})],1),r("el-form-item",{attrs:{label:"放款数：",prop:"transferDeduction"}},[r("el-input",{attrs:{clearable:""},model:{value:e.todayDetailForm.transferDeduction,callback:function(t){e.$set(e.todayDetailForm,"transferDeduction",e._n(t))},expression:"todayDetailForm.transferDeduction"}})],1),r("el-form-item",{attrs:{label:"放款金额：",prop:"transferAmount"}},[r("el-input",{attrs:{clearable:""},model:{value:e.todayDetailForm.transferAmount,callback:function(t){e.$set(e.todayDetailForm,"transferAmount",t)},expression:"todayDetailForm.transferAmount"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDetailDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.saveTodayDetail}},[e._v("确 定")])],1)],1)],1)},n=[],o=(r("8e6e"),r("96cf"),r("3b8d")),i=(r("a481"),r("bd86")),l=(r("456d"),r("7514"),r("6762"),r("2fdb"),r("ac6a"),r("28a5"),r("bc3a")),s=r.n(l),c=r("e1ca"),u=r("e6fd");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(r,!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=localStorage.getItem("ERTIX_FLOWIN_COLUMN");if(f){var h=f.split(",");u["default"].forEach((function(e){e.checked=h.includes(e.label||e.slotName)||"summaryDate,channelCode,handle".includes(e.prop)}))}var m=u["default"].filter((function(e){return"function"===typeof e.render&&-1==="summaryDate,wxCount,qqCount".indexOf(e.prop)})).map((function(e){return e.prop})),g=function(e,t,r){""===t?r(new Error("放款金额不能为空")):(isNaN(t)&&r(new Error("放款金额必须为数字")),r())},b=u["default"].filter((function(e){return e.slotName})).map((function(e){return e.prop})),y={name:"channel-page",components:{GridUnit:c["a"]},data:function(){var e=this,t=this.$createElement;return{pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){var t=new Date,r=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),0,0,0);e.$emit("pick",[r,t])}},{text:"最近一周",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-6048e5),e.$emit("pick",[r,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-2592e6),e.$emit("pick",[r,t])}},{text:"最近一年",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-31536e6),e.$emit("pick",[r,t])}}],showNowBtn:!0},totalRow:{},channelList:[],channelOperatorList:[],formParams:{timeRange:[],channelArr:[],channelOperator:""},footerScopedSlots:{partPrice:function(){return t("div",{class:"cell"},[t("p",{class:"table-slot-text"},["U",t("span",{style:"float: right"},[e.totalRow.uvPrice])]),t("p",{class:"table-slot-text"},["A",t("span",{style:"float: right"},[e.totalRow.registerPrice])])])},uuROI:function(){return t("div",{class:"cell"},[t("p",{class:"table-slot-text"},["U/U",t("span",{style:"float: right"},[Object(u["formatRate"])(e.totalRow.uvProfitPrice,e.totalRow.uvPrice)])]),t("p",{class:"table-slot-text"},["U/A",t("span",{style:"float: right"},[Object(u["formatRate"])(e.totalRow.uvProfitPrice,e.totalRow.registerPrice)])])])},handle:function(){return t("div",{class:"cell"},[t("el-button",{attrs:{title:"渠道详情",size:"small",icon:"el-icon-s-promotion"},on:{click:function(){return e.handleChannerDialogVisible(e.totalRow)}}}),t("el-button",{attrs:{title:"甲方详情",size:"small",type:"success",icon:"el-icon-s-custom"},on:{click:function(){return e.handleAPartDialogVisible(e.totalRow)}}})])}},queryFormValues:{},channelDetailFormValues:{},aPartDetailFormValues:{},todayDetailFormValues:{},sourceDetailFormValues:{},reqFunc:this.$api.flowIn.getFlowInList,channelDetailReqFunc:this.$api.flowIn.getChannelDetail,aPartDetailReqFunc:this.$api.flowIn.getAPartDetail,todayDetailReqFunc:function(e){return s.a.get("/stream/in/detail/list",{params:e})},sourceDetailReqFunc:function(e){return s.a.get("/stream/in/detail/source/list",{params:e})},colModels:u["default"],curColModels:[],channelDetailData:[],expandColModels:[{prop:"osName",label:"操作系统"},{prop:"pvCount",label:"PV数"},{prop:"uvCount",label:"UV数"},{prop:"channelUvCount",label:"渠道UV数"},{prop:"downloadCount",label:"下载数"},{prop:"channelDownloadCount",label:"渠道下载数"},{prop:"registerCount",label:"注册数"},{prop:"loginCount",label:"登录数"},{prop:"aimPv",label:"目标PV"},{prop:"aimUv",label:"目标UV"},{prop:"outDownloadCount",label:"甲方下载数"},{prop:"registerLoginCount",label:"首日登录数"},{prop:"loginUvCount",label:"次日UV"},{prop:"UvRate",label:"UV留存率",render:function(e){return Object(u["formatRate"])(e.loginUvCount,e.registerLoginCount)}}],aPartDetailColModels:[{label:"渠道编码",prop:"channelCode"},{label:"应用名称",prop:"appName"},{label:"PV数",prop:"pvCount"},{label:"UV数",prop:"uvCount"},{label:"下载数",prop:"downloadCount"}],todayDetailColModels:[{label:"时间",prop:"summaryDate",width:170},{label:"实际注册数",prop:"registerCount"},{label:"注册数(渠道)",prop:"registerDeduction"},{label:"实际登录数",prop:"loginCount"},{label:"登录数(渠道)",prop:"loginDeduction"},{label:"下款数(渠道)",prop:"transferDeduction"},{label:"下款金额(渠道)",prop:"transferAmount"},{label:"操作",slotName:"handle",fixed:"right",align:"center",width:70}],sourceDetailColModels:[{prop:"softSource",label:"可检测来源"},{prop:"clickNumber",label:"点击数"},{prop:"userNumber",label:"点击用户数"}],channerDialogVisible:!1,APartDialogVisible:!1,todayDetailDialogVisible:!1,sourceDetailDialogVisible:!1,editDetailDialogVisible:!1,todayDetailForm:{registerCount:"",loginCount:"",registerDeduction:"",loginDeduction:"",transferDeduction:"",transferAmount:""},todayDetailFormRules:{registerCount:[{required:!0,message:"实际注册数不能为空",trigger:"blur"}],loginCount:[{required:!0,message:"实际登录数不能为空",trigger:"blur"}],registerDeduction:[{required:!0,message:"注册数不能为空",trigger:"blur"},{type:"number",message:"注册数必须为数字",trigger:"blur"}],loginDeduction:[{required:!0,message:"登录数不能为空",trigger:"blur"},{type:"number",message:"登录数必须为数字",trigger:"blur"}],transferDeduction:[{required:!0,message:"放款数不能为空",trigger:"blur"},{type:"number",message:"放款数必须为数字",trigger:"blur"}],transferAmount:[{validator:g,trigger:"blur"}]},formatRate:u["formatRate"]}},watch:{formParams:{deep:!0,handler:function(e){var t=this;this.$set(this,"queryFormValues",{channelCode:e.channelArr.join(","),channelOperator:e.channelOperator,startTime:e.timeRange?e.timeRange[0]:"",endTime:e.timeRange?e.timeRange[1]:""}),this.$nextTick((function(){t.searchParams(),t.$refs.flowInGrid.$refs.gridUnit.clearSort()}))}}},methods:{setDefaultTime:function(e){return e&&e.maxDate&&e.maxDate.getTime()>(new Date).getTime()-864e5?["00:00:00",[(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds()].map((function(e){return e<10?"0"+e:e})).join(":")]:["00:00:00","23:59:59"]},dataHandler:function(e){var t=e.filter((function(e){return"全部"===e.summaryDate}))[0];return t&&(this.totalRow=this.$set(this,"totalRow",t),e=e.filter((function(e){return"全部"!==e.summaryDate}))),e},getSummaries:function(e){var t=this;return e.data.length?e.columns.map((function(e){if(b.includes(e.property))return"needSlots";var r=u["default"].find((function(t){return t.prop===e.property}));function a(e,t){var a=r.render(this.totalRow),n=r.rate(this.totalRow);if("-"===a)return"-";var o=n>t?"green":n<e?"red":"#606266";return'<span style="color: '.concat(o,'">').concat(a,"</span>")}switch(e.property){case"registerDeduction":case"registerCount":case"loginDeduction":case"outDownloadCount":return a.apply(t,[40,60]);case"aimUv":return a.apply(t,[150]);default:return r.render?r.render(t.totalRow):t.totalRow[e.property]}})):["全部"]},handleCheckedChange:function(){var e=this;this.$refs.flowInGrid.loading=!0,setTimeout((function(){e.curColModels=e.colModels.filter((function(e){return e.checked})),setTimeout((function(){e.$refs.flowInGrid.loading=!1}),0)}),0);var t=this.colModels.filter((function(e){return e.checked})).map((function(e){return e.label||e.slotName})).join(",");localStorage.setItem("ERTIX_FLOWIN_COLUMN",t)},handleSearch:function(e){var t=this;2===e&&(this.formParams.channelArr=[],this.formParams.timeRange=[],this.formParams.channelOperator="");var r=1===e?{channelCode:this.formParams.channelArr.join(","),channelOperator:this.formParams.channelOperator,startTime:this.formParams.timeRange?this.formParams.timeRange[0]:"",endTime:this.formParams.timeRange?this.formParams.timeRange[1]:""}:{};this.$set(this,"queryFormValues",r),this.$nextTick((function(){t.searchParams(),t.$refs.flowInGrid.$refs.gridUnit.clearSort()}))},searchParams:function(){this.$refs.flowInGrid.searchHandler()},handleChannerDialogVisible:function(e){var t=this;this.$set(this,"channelDetailFormValues",{summaryDate:e.summaryDate,channelCode:e.channelCode,channelCodes:this.queryFormValues.channelCode,startTime:this.queryFormValues.startTime||"",endTime:this.queryFormValues.endTime||""}),this.channerDialogVisible=!0,this.$nextTick((function(){t.$refs.channelDetailGrid.searchHandler()}))},handleAPartDialogVisible:function(e){var t=this;this.$set(this,"aPartDetailFormValues",{summaryDate:e.summaryDate,channelCode:e.channelCode,channelCodes:this.queryFormValues.channelCode,startTime:this.queryFormValues.startTime||"",endTime:this.queryFormValues.endTime||""}),this.APartDialogVisible=!0,this.$nextTick((function(){t.$refs.aPartDetailGrid.searchHandler()}))},handleTodayDialogVisible:function(e){var t=this;this.$set(this,"todayDetailFormValues",{summaryDate:e.summaryDate,channelCode:e.channelCode}),this.todayDetailDialogVisible=!0,this.$nextTick((function(){t.$refs.todayDetailGrid.searchHandler()}))},handleSourceDialogVisible:function(e){var t=this;this.$set(this,"sourceDetailFormValues",{summaryDate:e.summaryDate,channelCode:e.channelCode}),this.sourceDetailDialogVisible=!0,this.$nextTick((function(){t.$refs.sourceDetailGrid.searchHandler()}))},editTodayDetail:function(e){var t=e.id,r=e.registerCount,a=e.loginCount,n=e.registerDeduction,o=e.loginDeduction,i=e.transferDeduction,l=e.transferAmount;this.$set(this,"todayDetailForm",{id:t,registerCount:r,loginCount:a,registerDeduction:n,loginDeduction:o,transferDeduction:i,transferAmount:l}),this.editDetailDialogVisible=!0},saveTodayDetail:function(){var e=this;this.$refs.todayDetailForm.validate((function(t){t&&s()({url:"/stream/in/update",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(e){return Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")}],data:e.todayDetailForm}).then((function(t){0===t.data.code?(e.$message({type:"success",message:t.data.msg||"操作成功"}),e.editDetailDialogVisible=!1,e.$refs.todayDetailGrid.fetchHandler()):e.$message({type:"error",message:t.data.msg||"操作失败"})}))}))},handleEditDetailDialogClosed:function(){this.$refs.todayDetailForm.clearValidate(),this.$set(this,"todayDetailForm",{registerCount:"",loginCount:"",registerDeduction:"",loginDeduction:"",transferDeduction:"",transferAmount:""})},headerCellStyle:function(e){var t=e.column;return!!m.includes(t.property)&&{color:"#4d5dec"}},cellStyle:function(e){var t=e.row,r=e.column,a=e.columnIndex,n=r.property;function o(e,r){var n=this.curColModels[a].rate(t);return{color:n>r?"green":n<e?"red":"#606266"}}switch(n){case"channelCode":var i=t.wxCount||0,l=t.qqCount||0,s=i+l>(t["uvCount"]||0)/2;return!!s&&{color:"red"};case"registerDeduction":case"registerCount":case"loginDeduction":case"outDownloadCount":return o.apply(this,[40,60]);case"aimUv":return o.apply(this,[150]);default:return!1}},sortChange:function(e){var t=e.prop,r=e.order;this.$set(this,"queryFormValues",p({},this.queryFormValues,{sort:r?t:"",sortOrder:r?r.replace("ending",""):""})),this.$nextTick(this.searchParams)}},mounted:function(){var e=this;this.$refs.myPicker.emitInput([new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),0,0,0),new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1,0,0,0)]),this.timer=setInterval((function(){e.$refs.flowInGrid.fetchHandler(void 0,!0)}),5e3)},beforeDestory:function(){clearInterval(this.timer)},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.curColModels=this.colModels.filter((function(e){return e.checked})),e.next=3,this.$api.flowIn.getChannelList();case 3:return t=e.sent,e.next=6,this.$api.flowIn.getChannelOperator();case 6:r=e.sent,this.channelList=t.data||[],this.channelOperatorList=r.data||[];case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},w=y,v=(r("b718"),r("399e"),r("2877")),D=Object(v["a"])(w,a,n,!1,null,"02fbfe82",null);t["default"]=D.exports},e1ca:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"model-table-pagenation"},[r("div",{staticClass:"model-table"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.loading,expression:"loading",modifiers:{lock:!0}}],ref:"gridUnit",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:e.border,stripe:e.stripe,"max-height":e.tableHeight,fit:e.fit,size:e.size,"show-header":e.showHeader,"highlight-current-row":e.highlightCurrentRow,"current-row-key":e.currentRowKey,"row-class-name":e.rowClassName,"row-style":e.rowStyle,"row-ket":e.rowKey,"empty-text":e.emptyText,"default-expand-all":e.defaultExpandAll,"expand-row-keys":e.expandRowKeys,"default-sort":e.defaultSort,"tooltip-effect":e.tooltipEffect,"show-summary":e.showSummary,"sum-text":e.sumText,"summary-method":e.summaryMethod,"cell-class-name":e.cellClassName,"span-method":e.spanMethod,"header-row-style":e.headerRowStyle,"header-cell-style":e.headerCellStyle,"cell-style":e.cellStyle,footerScopedSlots:e.footerScopedSlots},on:{select:function(t,r){return e.emitEventHandler("select",t,r)},"select-all":function(t){return e.emitEventHandler("select-all",t)},"selection-change":function(t){return e.emitEventHandler("selection-change",t)},"cell-mouse-enter":function(t,r,a,n){return e.emitEventHandler("cell-mouse-enter",t,r,a,n)},"cell-mouse-leave":function(t,r,a,n){return e.emitEventHandler("cell-mouse-leave",t,r,a,n)},"cell-click":function(t,r,a,n){return e.emitEventHandler("cell-click",t,r,a,n)},"cell-dblclick":function(t,r,a,n){return e.emitEventHandler("cell-dblclick",t,r,a,n)},"row-click":function(t,r,a){return e.emitEventHandler("row-click",t,r,a)},"row-dblclick":function(t,r){return e.emitEventHandler("row-dblclick",t,r)},"row-contextmenu":function(t,r){return e.emitEventHandler("row-contextmenu",t,r)},"header-click":function(t,r){return e.emitEventHandler("header-click",t,r)},"sort-change":function(t){return e.emitEventHandler("sort-change",t)},"filter-change":function(t){return e.emitEventHandler("filter-change",t)},"current-change":function(t,r){return e.emitEventHandler("current-change",t,r)},"header-dragend":function(t,r,a,n){return e.emitEventHandler("header-dragend",t,r,a,n)},"expand-change":function(t,r){return e.emitEventHandler("expand-change",t,r)}}},[e.showRowIndex?r("el-table-column",{attrs:{type:"index",width:"40",align:"center"}}):e._e(),e.showExpand?r("el-table-column",{attrs:{type:"expand",width:"40"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("expandTable",null,{row:t.row}),e._t("expandForm",null,{row:t.row})]}}],null,!0)}):e._e(),e._l(e.columns,(function(t,a){return[t.slot&&e.showSelection?e._t(t.slot):e._e(),t.slot?e._e():r("el-table-column",{key:a,attrs:{"column-key":t.columnKey,prop:t.prop,label:t.label,width:t.minWidth?"-":t.width||"auto","min-width":t.minWidth||t.width||100,fixed:t.fixed,"render-header":t.renderHeader,sortable:t.sortable,"sort-method":t.method,resizable:t.resizable,formatter:t.formatter,"show-overflow-tooltip":t.showOverflowTooltip||!0,align:t.align||"left","header-align":t.headerAlign||t.align,"class-name":t.className,"label-class-name":t.labelClassName,selectable:t.selectable,"reserve-selection":t.reserveSelection,filters:t.filters,"filter-placement":t.filterPlacement,"filter-multiple":t.filterMultiple,"filter-method":t.filterMethod,"filtered-value":t.filteredValue},scopedSlots:e._u([{key:"default",fn:function(a){return[t.filter?r("span",["parseTime"===t.filter&&a.row[t.prop]&&""!=a.row[t.prop]?r("i",{staticClass:"el-icon-time"}):e._e(),e._v("\n              "+e._s(e.Vue.filter(t["filter"])(a.row[t.prop]))+"\n            ")]):"img"===t.type?r("div",{staticStyle:{display:"flex"}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.row[t.prop],expression:"scope.row[column.prop]"}],staticClass:"image preview-img image-center",attrs:{width:"40",height:"40"},on:{click:function(r){return e.previewImage(a.row[t.prop])}}})]):"link"===t.type?r("a",{staticStyle:{color:"#409eff"},attrs:{href:a.row[t.prop],target:"_blank"}},[e._v("\n              "+e._s(a.row[t.prop])+"\n            ")]):"status"===t.type&&t.unitFilters?r("el-tag",{attrs:{type:t.unitFilters.renderStatusType(a.row[t.prop])}},[e._v("\n              "+e._s(t.unitFilters.renderStatusValue(a.row[t.prop]))+"\n            ")]):t.slotName?r("span",[e._t(t.slotName,null,{row:a.row,$index:a.$index})],2):t.isHandle?r("span",[r("el-button",{attrs:{icon:t.icon,type:"primary",size:"small"}},[e._v(e._s(t.text))])],1):r("span",[e._v("\n              "+e._s(t.render?t.render(a.row):a.row[t.prop])+"\n            ")])]}}],null,!0)})]}))],2)],1),e.showPagination?r("div",{ref:"gridPagination",staticClass:"model-pagenation"},[r("el-pagination",{attrs:{background:e.pagenationBg,"current-page":e.pagination.pageNo,"page-sizes":e.pageSizes,"page-size":e.pagination.pageSize,layout:e.paginationLayout,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()])},n=[],o=(r("6762"),r("5df3"),r("1c4c"),r("75fc")),i=r("7618"),l=(r("6b54"),r("28a5"),r("ac6a"),r("bd86")),s=r("2b0e"),c=(r("c5f6"),{maxHeight:[String,Number],stripe:{type:Boolean,default:!0},border:{type:Boolean,default:!0},size:{type:String,default:"medium"},fit:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},highlightCurrentRow:{type:Boolean,default:!0},currentRowKey:[String,Number],rowClassName:[String,Function],rowStyle:[String,Function],rowKey:[String,Function],emptyText:String,defaultExpandAll:Boolean,expandRowKeys:Array,defaultSort:Object,tooltipEffect:String,showSummary:Boolean,sumText:String,summaryMethod:Function,cellClassName:[String,Function],headerRowStyle:[Function],headerCellStyle:[Function],cellStyle:[Function],footerScopedSlots:[Object],reqMethod:Function,selectionKey:{type:String,default:"id"},headers:{type:Object,default:function(){return{}}},showRowIndex:{type:Boolean,default:!1},showSelection:{type:Boolean,default:!1},showExpand:{type:Boolean,default:!1},listField:{type:String,default:"rows"},totalField:{type:String,default:"total"},params:{type:Object,default:function(){return{}}},formOptions:{type:Object,default:function(){return{}}},autoLoad:{type:Boolean,default:!0},spanMethod:{type:Function},indexMethod:{type:Function},type:{type:String,default:"remote",validator:function(e){var t=["remote","local"],r=-1!==t.indexOf(e);return r||!1}},data:{type:Array},dataHandler:{type:Function},columns:{type:Array,required:!0,columnKey:String,label:{type:String,required:!0},prop:{type:String,required:!0},width:{type:[Number,String],default:"auto"},minWidth:{type:Number,default:100},fixed:[Boolean,String],renderHeader:Function,sortable:[Boolean,String],sortMethod:Function,resizable:Boolean,formatter:Function,showOverflowTooltip:{type:Boolean,default:!0},align:{type:String,default:"left"},headerAlign:String,className:{type:String,default:""},labelClassName:{type:String,default:""},selectable:Function,reserveSelection:Boolean,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterMethod:Function,filteredValue:Array,filter:{type:String},render:{type:Function},slotName:{type:String}},expandColums:{type:Array,default:function(){return[]}},showPagination:{type:Boolean,default:!0},pagenationBg:{type:Boolean,default:!0},pageSize:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[10,20,50,100]}},paginationLayout:{type:String,default:"total, sizes, prev, pager, next, jumper"},pageNoKey:{type:String,default:"page"},pageSizeKey:{type:String,default:"size"}}),u=c,d=r("ed08"),p=r("0e15"),f=r.n(p),h=0,m=0,g=15,b=20,y=15,w={name:"tablePagination",props:u,data:function(){return{Vue:s["default"],pagination:{pageNo:1,pageSize:this.pageSizes?this.pageSizes[0]:20},total:0,loading:!1,tableData:[],searchParams:{},multipleSelection:[],multipleSelectionAll:[],tableHeight:600}},computed:{},watch:{formOptions:{immediate:!0,handler:function(e){this.searchParams=Object.assign(e,this.params)},deep:!0},params:{handler:function(e){this.searchParams=Object.assign(e,this.params)},deep:!0}},mounted:function(){var e=this;this.$refs.gridUnit.$on("expand-change",(function(t,r){return e.emitEventHandler("expand-change",t,r)}));var t=this.type,r=this.autoLoad,a=this.formOptions,n=this.params,o=this.data;"remote"===t&&r?(this.searchParams=a?Object.assign(a,n):n,this.fetchHandler()):"local"===t&&Array.isArray(o)&&(this.tableData=o,this.total=o.length),this.$nextTick((function(){g=document.querySelectorAll(".el-tabs")[0]?15:0,e.changeTableSize(),window.addEventListener("resize",e.changeTableSize)}))},beforeDestroy:function(){window.removeEventListener("resize",this.changeTableSize)},methods:{previewImage:function(e){if(!e)return!1;var t={src:e},r=new Image;r.src=e,r.onload=function(){t.w=r.width||800,t.h=r.height||600,s["default"].$preview.open(0,[t])}},handleSizeChange:function(e){this.pagination.pageSize=e,this.fetchHandler("selection")},handleCurrentChange:function(e){this.pagination.pageNo=e,this.changePageHoldSelection(),this.fetchHandler("selection")},searchHandler:function(e){this.pagination.pageNo=1,e&&"clear"===e.type&&(this.searchParams=e.data),this.fetchHandler()},fetchHandler:function(e,t){var r,a,n=this,o=this.reqMethod,s=this.listField,c=this.pageNoKey,u=this.pageSizeKey,p=this.totalField,f=this.showPagination,h=this.pagination;if("function"!==typeof o)return this.$message.error("请传入请求方法"),!1;(this.loading=!t,r=Object(d["a"])(Object(d["d"])(this.searchParams)),f)&&(r=Object.assign(r,(a={},Object(l["a"])(a,c,"offset"===c?(h.pageNo-1)*h.pageSize:h.pageNo),Object(l["a"])(a,u,h.pageSize),a)));o(r).then((function(t){var r=t,a=r;if(!r||r instanceof Array||(s&&-1!==s.indexOf(".")?s.split(".").forEach((function(e){a=a[e]})):a=r[s]||[]),!a||!(a instanceof Array))return n.loading=!1,!1;n.dataHandler?n.tableData=n.dataHandler(a):n.tableData=a;var o=r;"[object Array]"===Object.prototype.toString.call(r)?o=r.length:"object"===Object(i["a"])(r)?p&&-1!==p.indexOf(".")?p.split(".").forEach((function(e){o=o[e]})):o=r[p]||0:o=0,n.total=o,n.loading=!1,"selection"===e?setTimeout((function(){n.setSelectRow()}),0):(n.multipleSelection=[],n.multipleSelectionAll=[])})).catch((function(e){n.$message.error(e.msg||"请求失败"),n.loading=!1}))},emitEventHandler:function(e){var t=this,r=arguments;"selection-change"===e?(this.multipleSelection=Object(o["a"])(Array.from(arguments).slice(1))[0],setTimeout((function(){t.changePageHoldSelection(),t.$emit.apply(t,[e].concat(Object(o["a"])(Array.from(r).slice(1))))}),0)):this.$emit.apply(this,[e].concat(Object(o["a"])(Array.from(arguments).slice(1))))},setSelectRow:function(){if(this.multipleSelectionAll&&!(this.multipleSelectionAll.length<=0)){var e=this.selectionKey,t=[];this.multipleSelectionAll.forEach((function(r){t.push(r[e])})),this.$refs.gridUnit.clearSelection();for(var r=0;r<this.tableData.length;r++)t.includes(this.tableData[r][e])&&this.$refs.gridUnit.toggleRowSelection(this.tableData[r],!0)}},changePageHoldSelection:function(){var e=this,t=this.selectionKey;if(this.multipleSelectionAll.length<=0)this.multipleSelectionAll=this.multipleSelection;else{var r=[];this.multipleSelectionAll.forEach((function(e){r.push(e[t])}));var a=[];this.multipleSelection.forEach((function(n){a.push(n[t]),r.includes(n[t])||e.multipleSelectionAll.push(n)}));var n=[];this.tableData.forEach((function(e){a.includes(e[t])||n.push(e[t])})),n.forEach((function(a){if(r.includes(a))for(var n=0;n<e.multipleSelectionAll.length;n++)if(e.multipleSelectionAll[n][t]===a){e.multipleSelectionAll.splice(n,1);break}}))}},changeTableSize:f()(100,(function(){h=this.$refs.gridUnit.$el.getBoundingClientRect().top,m=this.$refs.gridPagination.offsetHeight;var e=document.body.clientHeight-h-m-g-b-y;this.tableHeight=Math.max(e,250)}))}},v=w,D=(r("b022"),r("2877")),C=Object(D["a"])(v,a,n,!1,null,"2580dfa0",null);t["a"]=C.exports},e6fd:function(e,t,r){"use strict";function a(e,t){return e||t?e&&t?(100*e/t).toFixed(1)+"%":"0%":"-"}function n(e,t){return e&&t?(100*e/t).toFixed(1):0}r.r(t),r.d(t,"formatRate",(function(){return a})),r.d(t,"calcRate",(function(){return n}));var o=[{label:"日期",prop:"summaryDate",width:65,fixed:!0,disabled:!0,checked:!0,render:function(e){return 10===e.summaryDate.length?e.summaryDate.substr(5):e.summaryDate}},{label:"渠道名称",prop:"channelCode",slotName:"channelName",width:110,fixed:!0,disabled:!0,checked:!0},{label:"PV",prop:"pvCount",width:70,sortable:"custom",checked:!1},{label:"UV",prop:"uvCount",width:70,sortable:"custom",checked:!0},{label:"下载数",prop:"downloadCount",width:80,sortable:"custom",checked:!0},{label:"渠道UV",prop:"channelUvCount",width:90,sortable:"custom",checked:!0},{label:"渠道下载",prop:"channelDownloadCount",width:90,sortable:"custom",checked:!0},{label:"注册数",prop:"registerCount",width:100,sortable:"custom",checked:!0,rate:function(e){return n(e.registerCount,e.uvCount)},render:function(e){var t=a(e.registerCount,e.uvCount);return e.registerCount+("-"===t?"":" ("+t+")")}},{label:"注册数(扣)",prop:"registerDeduction",width:100,sortable:"custom",checked:!0,rate:function(e){return n(e.registerDeduction,e.uvCount)},render:function(e){var t=a(e.registerDeduction,e.uvCount);return e.registerDeduction+("-"===t?"":" ("+t+")")}},{label:"登录数",prop:"loginCount",width:80,sortable:"custom",checked:!0},{label:"登录数(扣)",prop:"loginDeduction",width:100,sortable:"custom",checked:!0,rate:function(e){return n(e.loginDeduction,e.registerDeduction)},render:function(e){var t=a(e.loginDeduction,e.registerDeduction);return e.loginDeduction+("-"===t?"":" ("+t+")")}},{label:"转换PV",prop:"aimPv",width:80,sortable:"custom",checked:!1},{label:"转换UV",prop:"aimUv",width:100,sortable:"custom",checked:!0,rate:function(e){return n(e.aimUv,e.registerDeduction)},render:function(e){var t=a(e.aimUv,e.registerDeduction);return e.aimUv+("-"===t?"":" ("+t+")")}},{label:"下载数(下游)",prop:"outDownloadCount",width:110,sortable:"custom",checked:!0,rate:function(e){return n(e.outDownloadCount,e.aimUv)},render:function(e){var t=a(e.outDownloadCount,e.aimUv);return e.outDownloadCount+("-"===t?"":" ("+t+")")}},{label:"WX/QQ",prop:"wxqqCount",width:70,checked:!0,render:function(e){return(e.wxCount||0)+(e.qqCount||0)}},{label:"U/A成本",prop:"partPrice",slotName:"partPrice",width:100,checked:!0,render:function(){}},{label:"总成本",prop:"totalCost",width:75,checked:!0,sortable:"custom",render:function(e){var t=(e.uvPrice||0)+(e.registerPrice||0);return parseInt(t)===t?t:t.toFixed(1)}},{label:"UV收益",prop:"uvProfitPrice",width:80,sortable:"custom",checked:!0},{label:"ROI差值",prop:"diffRoi",width:80,checked:!0,sortable:"custom",render:function(e){var t=e.uvProfitPrice-((e.uvPrice||0)+(e.registerPrice||0));return parseInt(t)===t?t:t.toFixed(1)}},{label:"ROI",prop:"uuROI",slotName:"roi",width:110,checked:!0,render:function(){}},{label:"活跃度",prop:"totalActiveCount",width:80,render:function(e){return a(e.summaryCount,e.totalActiveCount)},checked:!0},{label:"T0",prop:"one",render:function(e){var t="-"===a(e.one,e.registerCount)?"-":(e.one||0)+" (".concat(a(e.one,e.registerCount),")");return t},checked:!0},{label:"T1",prop:"two",render:function(e){var t="-"===a(e.two,e.registerCount)?"-":(e.two||0)+" (".concat(a(e.two,e.registerCount),")");return t},checked:!0},{label:"T2",prop:"three",render:function(e){var t="-"===a(e.three,e.registerCount)?"-":(e.three||0)+" (".concat(a(e.three,e.registerCount),")");return t},checked:!0},{label:"T3",prop:"four",render:function(e){var t="-"===a(e.four,e.registerCount)?"-":(e.four||0)+" (".concat(a(e.four,e.registerCount),")");return t},checked:!1},{label:"T4",prop:"five",render:function(e){var t="-"===a(e.five,e.registerCount)?"-":(e.five||0)+" (".concat(a(e.five,e.registerCount),")");return t},checked:!1},{label:"T5",prop:"six",render:function(e){var t="-"===a(e.six,e.registerCount)?"-":(e.six||0)+" (".concat(a(e.six,e.registerCount),")");return t},checked:!1},{label:"T6",prop:"seven",render:function(e){var t="-"===a(e.seven,e.registerCount)?"-":(e.seven||0)+" (".concat(a(e.seven,e.registerCount),")");return t},checked:!1},{label:"操作",slotName:"handle",prop:"handle",fixed:"right",align:"center",width:150,checked:!0}];t["default"]=o}}]);